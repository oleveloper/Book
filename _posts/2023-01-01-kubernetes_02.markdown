---
layout: post
title: "Kubernetes_02"
date: 2023-01-01
last_modified_at: 2023-01-01
categories: [Kubernetes]
tags: [Kubernetes]
---

# ETCD
먼저 key-value 저장소가 무엇이고, 기존 데이터베이스와는 무엇이 다른지, ETCD를 빠르게 시작하는 방법, ETCD를 운영하기 위해 클라이언트 도구를 사용하는 방법에 대해 기본적인 소개를 시작한다. 

## ETCD란 무엇인가?
빠르고 단순하고 안전하며 신뢰할 수 있는 분산형 Key-Value 저장소이다. 

## Key-Value 저장소란 무엇인가?
전통적으로, 데이터베이스는 표 형식이었다. (행과 열로 데이터를 저장하는 SQL 또는 관계형 DB)    
예를 들어, 개인 정보를 저장하는 표가 있다고 하자.   
행은 각각의 개인을 나타내고, 열은 저장되는 정보의 유형을 나타낸다.   
이제 이 개인에 대한 세부 정보를 추가하려 한다.   
그래서 컬럼을 추가한다.   
이렇게 하면 테이블 전체와, 테이블에 있는 모든 개인에게 영향을 미친다.   
그런다음 이 컬럼에 급여 세부 정보를 추가한다.    
그러나 모든 개인이 일을 하는 것은 아니기 때문에 일부 Cell은 비어있게 된다.   
그런 다음 새로운 컬럼을 추가하고, 개인의 성적을 업데이트 해보자.   
그러나 개인들 중 학생들만 성적이 존재하기 때문에 성인들의 Cell은 비어 있다.   
새 정보를 추가해야 할 때마다 테이블 전체가 영향을 받게 되어 빈 셀이 생성된다.

Key-Value 저장소는 문서, 또는 페이지 형태로 정보를 저장한다.    
그래서 모든 정보는 파일에 저장되고, 위 예시로 치자면 개인에 대한 모든 정보가 파일에 저장된다.   
이러한 파일은 임의 형식 또는 구조로 만들 수 있으며, 한 파일의 변경 내용은 다른 파일에 영향을 주지 않는다.   
일하는 사람들은 급여 필드가 있는 파일을 가질 수 있고, 학생들은 성적만 존재하는 페이지를 가질 수 있다.   
다른 문서를 업데이트 하지 않고도 문서에 세부사항을 추가할 수 있는 것이다.   

간단한 키-값을 저장하고 검색할 수 있지만, 데이터가 복잡해지면     
일반적으로 JSON, YANO와 같은 데이터 형식으로 트랜잭션을 수행하게 된다. 

## ETCD 설치 및 시작하기
바이너리 파일을 다운로드하고 압축을 푼 다음 실행한다.    
Github release page에서 OS에 따른 바이너리 파일을 다운로드 하고 압축을 푼 다음 ETCD 파일을 실행한다.    

ETCD를 실행하면 기본적으로 포트 2379에서 수신하는 서비스가 시작된다.   
그 다음, ETCD 서비스에 클라이언트를 연결해 정보를 저장 및 검색할 수 있다. 

## ETCD Control Client
ETCD와 함께 제공되는 기본 클라이언트는 ETCD Control client이다.    
이는 ETCD를 위한 Command line client이다.   
key-value 쌍을 저장하고 검색하는 데에 사용할 수 있다.    
key-value 쌍을 저장하려면 
```
etcdctl set key1
```
위 명령을 실행한 후 value1을 실행한다.   
이렇게 하면 데이터가 데이터베이스에 작성된다. 

key-value 쌍을 검색하려면 
```
etcdctl get key1
```
위 명령을 실행한다. 
추가 옵션은 etcdctl command으로 확인할 수 있다. 
